{"version":3,"file":"dashboardHelper-GcVVaPL0.js","sources":["../../src/components/feature/GroomingCalendar.tsx","../../src/components/feature/HotelCalendar.tsx","../../src/components/feature/RealtimeReservationSync.tsx","../../src/lib/realSMS.ts","../../src/lib/dashboardHelper.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\ninterface GroomingReservation {\n  id: string;\n  petName: string;\n  ownerName: string;\n  time: string;\n  phone: string;\n  style: string;\n  status: 'confirmed' | 'pending' | 'completed' | 'cancelled';\n}\n\ninterface GroomingData {\n  [date: string]: GroomingReservation[];\n}\n\n/**\n * 미용 예약 달력 컴포넌트\n * - localStorage에 저장된 groomingReservations 데이터를 불러와 날짜별로 그룹화하여 달력에 표시합니다.\n * - 선택한 날짜의 예약 목록을 보여주며, 수동으로 예약 추가/삭제가 가능합니다.\n */\nexport default function GroomingCalendar() {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [groomingData, setGroomingData] = useState<GroomingData>({});\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\n  // 수동 예약 추가 폼 표시 여부\n  const [showAddForm, setShowAddForm] = useState(false);\n  // 새 예약 입력 값 상태\n  const [newReservation, setNewReservation] = useState({\n    petName: '',\n    ownerName: '',\n    time: '',\n    phone: '',\n    style: ''\n  });\n\n  useEffect(() => {\n    loadGroomingData();\n    // 실시간 예약 업데이트 감지: reservationUpdated 이벤트가 발생하면 데이터 재로드\n    const handleReservationUpdate = () => {\n      loadGroomingData();\n    };\n    window.addEventListener('reservationUpdated', handleReservationUpdate);\n    return () => {\n      window.removeEventListener('reservationUpdated', handleReservationUpdate);\n    };\n  }, [currentDate]);\n\n  const loadGroomingData = () => {\n    try {\n      // 미용 예약은 allReservations에서 service가 'grooming'인 것과 groomingReservations 모두 포함\n      const allRaw = localStorage.getItem('allReservations');\n      const groomingRaw = localStorage.getItem('groomingReservations');\n      let reservations: any[] = [];\n      // 1) 전체 예약 중 미용(grooming) 예약 필터링\n      if (allRaw) {\n        try {\n          const all = JSON.parse(allRaw);\n          const fromAll = all.filter((r: any) => r && r.service === 'grooming');\n          reservations = reservations.concat(fromAll);\n        } catch (e) {\n          console.warn('allReservations 파싱 실패:', e);\n        }\n      }\n      // 2) 미용 달력에서 수동 추가한 예약 포함\n      if (groomingRaw) {\n        try {\n          const fromGrooming = JSON.parse(groomingRaw);\n          reservations = reservations.concat(fromGrooming);\n        } catch (e) {\n          console.warn('groomingReservations 파싱 실패:', e);\n        }\n      }\n      if (!reservations.length) {\n        generateMockGroomingData();\n        return;\n      }\n      // 3) id 기준으로 중복 제거\n      const seenIds = new Set<string>();\n      const deduped: any[] = [];\n      for (const res of reservations) {\n        if (!res || !res.id) continue;\n        if (seenIds.has(res.id)) continue;\n        seenIds.add(res.id);\n        deduped.push(res);\n      }\n      // 4) 날짜별 그룹화\n      const groupedData: GroomingData = {};\n      deduped.forEach((reservation: any) => {\n        const date = reservation.date;\n        if (!date) return;\n        if (!groupedData[date]) {\n          groupedData[date] = [];\n        }\n        groupedData[date].push({\n          id: reservation.id,\n          petName: reservation.petName,\n          ownerName: reservation.ownerName || '고객',\n          time: reservation.time,\n          phone: reservation.phone,\n          style: reservation.style || '기본미용',\n          status: reservation.status\n        });\n      });\n      // 시간순 정렬\n      Object.keys(groupedData).forEach(date => {\n        groupedData[date].sort((a, b) => a.time.localeCompare(b.time));\n      });\n      setGroomingData(groupedData);\n    } catch (error) {\n      console.warn('미용 예약 데이터 로드 실패:', error);\n      generateMockGroomingData();\n    }\n  };\n\n  const generateMockGroomingData = () => {\n    const data: GroomingData = {};\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const timeSlots = ['09:00', '10:00', '11:00', '13:00', '14:00', '15:00', '16:00', '17:00'];\n    const petNames = ['초코', '바둑이', '뽀삐', '코코', '몽이', '루루', '보리', '콩이'];\n    const ownerNames = ['김민수', '이영희', '박철수', '정수진', '최동훈', '한지민', '송민호', '윤서연'];\n    const styles = ['전체미용', '부분컷', '목욕+컷', '발톱정리', '얼굴컷', '위생미용'];\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(year, month, day);\n      const dateString = date.toISOString().split('T')[0];\n      // 주말과 평일에 따른 예약 패턴\n      const isWeekend = date.getDay() === 0 || date.getDay() === 6;\n      const maxReservations = isWeekend ? 6 : 4;\n      const numReservations = Math.floor(Math.random() * maxReservations);\n      if (numReservations > 0) {\n        const dayReservations: GroomingReservation[] = [];\n        const usedTimes = new Set<string>();\n        for (let i = 0; i < numReservations; i++) {\n          let time;\n          do {\n            time = timeSlots[Math.floor(Math.random() * timeSlots.length)];\n          } while (usedTimes.has(time));\n          usedTimes.add(time);\n          dayReservations.push({\n            id: `grooming-${dateString}-${i}`,\n            petName: petNames[Math.floor(Math.random() * petNames.length)],\n            ownerName: ownerNames[Math.floor(Math.random() * ownerNames.length)],\n            time: time,\n            phone: `010-${Math.floor(Math.random() * 9000) + 1000}-${Math.floor(Math.random() * 9000) + 1000}`,\n            style: styles[Math.floor(Math.random() * styles.length)],\n            status: ['confirmed', 'pending', 'completed'][Math.floor(Math.random() * 3)] as any\n          });\n        }\n        dayReservations.sort((a, b) => a.time.localeCompare(b.time));\n        data[dateString] = dayReservations;\n      }\n    }\n    setGroomingData(data);\n  };\n\n  const getDaysInMonth = () => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    const days = [] as (number | null)[];\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      days.push(null);\n    }\n    for (let day = 1; day <= daysInMonth; day++) {\n      days.push(day);\n    }\n    return days;\n  };\n\n  // 날짜 문자열을 로컬 시간 기준(한국 시간)으로 반환하는 함수\n  // toISOString()은 UTC 기준으로 날짜를 문자열로 반환하여 하루가 밀리는 문제가 발생할 수 있으므로\n  // 연도/월/일을 직접 조합하여 \"YYYY-MM-DD\" 형식의 문자열을 생성한다.\n  const getDateString = (day: number) => {\n    const year = currentDate.getFullYear();\n    // getMonth()는 0부터 시작하므로 +1을 해준다\n    const month = currentDate.getMonth() + 1;\n    const monthStr = month.toString().padStart(2, '0');\n    const dayStr = day.toString().padStart(2, '0');\n    return `${year}-${monthStr}-${dayStr}`;\n  };\n\n  const getReservationCount = (day: number) => {\n    const dateString = getDateString(day);\n    return groomingData[dateString]?.length || 0;\n  };\n\n  const getStatusColor = (count: number) => {\n    if (count === 0) return 'bg-gray-100 text-gray-500';\n    if (count <= 2) return 'bg-green-100 text-green-700';\n    if (count <= 4) return 'bg-yellow-100 text-yellow-700';\n    return 'bg-red-100 text-red-700';\n  };\n\n  const getStatusText = (count: number) => {\n    if (count === 0) return '예약없음';\n    if (count <= 2) return '여유';\n    if (count <= 4) return '보통';\n    return '포화';\n  };\n\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    const newDate = new Date(currentDate);\n    if (direction === 'prev') {\n      newDate.setMonth(newDate.getMonth() - 1);\n    } else {\n      newDate.setMonth(newDate.getMonth() + 1);\n    }\n    setCurrentDate(newDate);\n    setSelectedDate(null);\n  };\n\n  const handleDateClick = (day: number) => {\n    const dateString = getDateString(day);\n    setSelectedDate(selectedDate === dateString ? null : dateString);\n    // 폼을 초기화하고 숨김\n    setShowAddForm(false);\n    setNewReservation({ petName: '', ownerName: '', time: '', phone: '', style: '' });\n  };\n\n  const getReservationStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'completed': return 'bg-blue-100 text-blue-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // 입력 변경 핸들러\n  const handleNewChange = (field: keyof typeof newReservation, value: string) => {\n    setNewReservation((prev) => ({ ...prev, [field]: value }));\n  };\n\n  // 새 예약 추가\n  const addReservation = () => {\n    if (!selectedDate) return;\n    const reservations = JSON.parse(localStorage.getItem('groomingReservations') || '[]');\n    const newRes = {\n      id: `grooming-${selectedDate}-${Date.now()}`,\n      petName: newReservation.petName || '반려동물',\n      ownerName: newReservation.ownerName || '고객',\n      date: selectedDate,\n      time: newReservation.time || '미정',\n      phone: newReservation.phone || '',\n      style: newReservation.style || '기본미용',\n      status: 'confirmed',\n      service: 'grooming'\n    };\n    reservations.push(newRes);\n    localStorage.setItem('groomingReservations', JSON.stringify(reservations));\n    setNewReservation({ petName: '', ownerName: '', time: '', phone: '', style: '' });\n    setShowAddForm(false);\n    loadGroomingData();\n    window.dispatchEvent(new CustomEvent('reservationUpdated'));\n  };\n\n  // 예약 삭제\n  const deleteReservation = (id: string) => {\n    const reservations = JSON.parse(localStorage.getItem('groomingReservations') || '[]');\n    const newData = reservations.filter((r: any) => r.id !== id);\n    localStorage.setItem('groomingReservations', JSON.stringify(newData));\n    loadGroomingData();\n    window.dispatchEvent(new CustomEvent('reservationUpdated'));\n  };\n\n  const monthNames = ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'];\n  const dayNames = ['일','월','화','수','목','금','토'];\n  const today = new Date().toISOString().split('T')[0];\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            <i className=\"ri-scissors-line mr-2 text-yellow-600\"></i>\n            미용 예약 달력\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <button onClick={() => navigateMonth('prev')} className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer\">\n              <i className=\"ri-arrow-left-line text-gray-600\"></i>\n            </button>\n            <h4 className=\"text-xl font-semibold text-gray-800 min-w-[120px] text-center\">\n              {currentDate.getFullYear()}년 {monthNames[currentDate.getMonth()]}\n            </h4>\n            <button onClick={() => navigateMonth('next')} className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer\">\n              <i className=\"ri-arrow-right-line text-gray-600\"></i>\n            </button>\n          </div>\n        </div>\n        {/* 범례 */}\n        <div className=\"flex items-center justify-center space-x-6 mb-6 p-4 bg-yellow-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-gray-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">예약없음</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-green-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">여유 (1-2건)</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-yellow-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">보통 (3-4건)</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-red-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">포화 (5건+)</span>\n          </div>\n        </div>\n      </div>\n      {/* 달력 헤더 */}\n      <div className=\"grid grid-cols-7 gap-1 mb-2\">\n        {dayNames.map((day, index) => (\n          <div key={day} className={`p-3 text-center font-semibold text-sm ${index === 0 ? 'text-red-600' : index === 6 ? 'text-blue-600' : 'text-gray-700'}`}>{day}</div>\n        ))}\n      </div>\n      {/* 달력 본체 */}\n      <div className=\"grid grid-cols-7 gap-1\">\n        {getDaysInMonth().map((day, index) => {\n          if (day === null) {\n            return <div key={index} className=\"p-3\"></div>;\n          }\n          const dateString = getDateString(day);\n          const reservationCount = getReservationCount(day);\n          const isToday = dateString === today;\n          const isSelected = selectedDate === dateString;\n          return (\n            <div key={day} onClick={() => handleDateClick(day)} className={`relative p-3 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md ${isToday ? 'ring-2 ring-yellow-500' : ''} ${isSelected ? 'bg-yellow-50 border-yellow-300' : 'hover:bg-gray-50'}`}>\n              <div className=\"text-center\">\n                <div className={`text-lg font-semibold mb-1 ${index % 7 === 0 ? 'text-red-600' : index % 7 === 6 ? 'text-blue-600' : 'text-gray-900'}`}>{day}</div>\n                <div className=\"space-y-1\">\n                  <div className={`text-xs px-2 py-1 rounded-full ${getStatusColor(reservationCount)}`}>{getStatusText(reservationCount)}</div>\n                  {reservationCount > 0 && <div className=\"text-xs text-gray-600\">{reservationCount}건 예약</div>}\n                </div>\n              </div>\n              {isToday && <div className=\"absolute top-1 right-1\"><div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div></div>}\n            </div>\n          );\n        })}\n      </div>\n      {/* 선택된 날짜 상세 정보 */}\n      {selectedDate && groomingData[selectedDate] && (\n        <div className=\"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\n          <h4 className=\"font-semibold text-yellow-900 mb-3\">\n            {new Date(selectedDate).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })} 미용 예약 현황\n          </h4>\n          <div className=\"space-y-3\">\n            {groomingData[selectedDate].map((reservation, index) => (\n              <div key={index} className=\"bg-white rounded-lg p-3 border border-yellow-200\">\n                <div className=\"flex justify-between items-start\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-1\">\n                      <span className=\"font-semibold text-gray-900\">{reservation.time}</span>\n                      <span className={`text-xs px-2 py-1 rounded-full ${getReservationStatusColor(reservation.status)}`}>\n                        {reservation.status === 'confirmed' ? '확정' : reservation.status === 'pending' ? '대기' : reservation.status === 'completed' ? '완료' : '취소'}\n                      </span>\n                    </div>\n                    <div className=\"text-sm text-gray-700\">\n                      <div className=\"flex items-center space-x-4\">\n                        <span><strong>반려동물:</strong> {reservation.petName}</span>\n                        <span><strong>보호자:</strong> {reservation.ownerName}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-4 mt-1\">\n                        <span><strong>미용스타일:</strong> {reservation.style}</span>\n                        <span><strong>연락처:</strong> {reservation.phone}</span>\n                      </div>\n                    </div>\n                  </div>\n                  {/* 삭제 버튼 */}\n                  <button onClick={() => deleteReservation(reservation.id)} className=\"text-red-500 text-xs ml-2\">삭제</button>\n                </div>\n              </div>\n            ))}\n          </div>\n          {/* 예약 추가/폼 */}\n          <div className=\"mt-4\">\n            {showAddForm ? (\n              <div className=\"space-y-2\">\n                <input type=\"text\" placeholder=\"반려동물 이름\" value={newReservation.petName} onChange={(e) => handleNewChange('petName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"보호자 이름\" value={newReservation.ownerName} onChange={(e) => handleNewChange('ownerName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"time\" value={newReservation.time} onChange={(e) => handleNewChange('time', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"연락처\" value={newReservation.phone} onChange={(e) => handleNewChange('phone', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"미용 스타일\" value={newReservation.style} onChange={(e) => handleNewChange('style', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <div className=\"flex space-x-2\">\n                  <button onClick={addReservation} className=\"bg-yellow-500 text-white px-3 py-1 rounded\">추가</button>\n                  <button onClick={() => { setShowAddForm(false); setNewReservation({ petName: '', ownerName: '', time: '', phone: '', style: '' }); }} className=\"border px-3 py-1 rounded\">취소</button>\n                </div>\n              </div>\n            ) : (\n              <button onClick={() => setShowAddForm(true)} className=\"bg-yellow-500 text-white px-3 py-1 rounded\">예약 추가</button>\n            )}\n          </div>\n        </div>\n      )}\n      {/* 예약이 없는 날짜에 대한 안내와 추가 폼 */}\n      {selectedDate && !groomingData[selectedDate] && (\n        <div className=\"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n          <h4 className=\"font-semibold text-gray-700 mb-2\">\n            {new Date(selectedDate).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}\n          </h4>\n          <p className=\"text-gray-600 mb-4\">이 날은 미용 예약이 없습니다.</p>\n          {/* 예약이 없는 날에도 새 예약 추가 가능 */}\n          <div>\n            {showAddForm ? (\n              <div className=\"space-y-2\">\n                <input type=\"text\" placeholder=\"반려동물 이름\" value={newReservation.petName} onChange={(e) => handleNewChange('petName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"보호자 이름\" value={newReservation.ownerName} onChange={(e) => handleNewChange('ownerName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"time\" value={newReservation.time} onChange={(e) => handleNewChange('time', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"연락처\" value={newReservation.phone} onChange={(e) => handleNewChange('phone', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"미용 스타일\" value={newReservation.style} onChange={(e) => handleNewChange('style', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <div className=\"flex space-x-2\">\n                  <button onClick={addReservation} className=\"bg-yellow-500 text-white px-3 py-1 rounded\">추가</button>\n                  <button onClick={() => { setShowAddForm(false); setNewReservation({ petName: '', ownerName: '', time: '', phone: '', style: '' }); }} className=\"border px-3 py-1 rounded\">취소</button>\n                </div>\n              </div>\n            ) : (\n              <button onClick={() => setShowAddForm(true)} className=\"bg-yellow-500 text-white px-3 py-1 rounded\">예약 추가</button>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\n\ninterface HotelReservation {\n  id: string;\n  petName: string;\n  ownerName: string;\n  checkIn: string;\n  checkOut: string;\n  roomType: string;\n  phone: string;\n  status: 'confirmed' | 'pending' | 'completed' | 'cancelled';\n}\n\ninterface HotelData {\n  [date: string]: HotelReservation[];\n}\n\n/**\n * 호텔 예약 달력 컴포넌트\n * - localStorage에 저장된 hotelReservations 데이터를 불러와 날짜별로 그룹화하여 달력에 표시합니다.\n * - 선택한 날짜의 예약 목록을 보여주며, 수동으로 예약을 추가/삭제할 수 있습니다.\n */\nexport default function HotelCalendar() {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [hotelData, setHotelData] = useState<HotelData>({});\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\n  // 예약 추가 폼 표시 여부\n  const [showAddForm, setShowAddForm] = useState(false);\n  // 새 호텔 예약 입력 값 상태\n  const [newReservation, setNewReservation] = useState({\n    petName: '',\n    ownerName: '',\n    checkOut: '',\n    roomType: '',\n    phone: ''\n  });\n\n  useEffect(() => {\n    loadHotelData();\n    // 실시간 예약 업데이트 감지\n    const handleReservationUpdate = () => {\n      loadHotelData();\n    };\n    window.addEventListener('reservationUpdated', handleReservationUpdate);\n    return () => {\n      window.removeEventListener('reservationUpdated', handleReservationUpdate);\n    };\n  }, [currentDate]);\n\n  // 호텔 예약 데이터 불러오기 및 그룹화\n  const loadHotelData = () => {\n    try {\n      // 호텔 예약은 allReservations에서 service가 'hotel'인 경우와 hotelReservations 모두를 포함한다.\n      const allRaw = localStorage.getItem('allReservations');\n      const hotelRaw = localStorage.getItem('hotelReservations');\n      let reservations: any[] = [];\n      // 1) 전체 예약 중 service === 'hotel' 항목 추가\n      if (allRaw) {\n        try {\n          const all = JSON.parse(allRaw);\n          const fromAll = all.filter((r: any) => r && r.service === 'hotel');\n          reservations = reservations.concat(fromAll);\n        } catch (e) {\n          console.warn('allReservations 파싱 실패:', e);\n        }\n      }\n      // 2) 호텔 달력에서 수동으로 추가한 예약 포함\n      if (hotelRaw) {\n        try {\n          const fromHotel = JSON.parse(hotelRaw);\n          reservations = reservations.concat(fromHotel);\n        } catch (e) {\n          console.warn('hotelReservations 파싱 실패:', e);\n        }\n      }\n      // 예약 데이터가 없으면 모의 데이터 생성\n      if (!reservations.length) {\n        generateMockHotelData();\n        return;\n      }\n      // 3) id 기준으로 중복 제거\n      const seenIds = new Set<string>();\n      const deduped: any[] = [];\n      for (const res of reservations) {\n        if (!res || !res.id) continue;\n        if (seenIds.has(res.id)) continue;\n        seenIds.add(res.id);\n        deduped.push(res);\n      }\n      // 4) 체크인 날짜 기준으로 그룹화\n      const groupedData: HotelData = {};\n      deduped.forEach((reservation: any) => {\n        const checkInDate = reservation.checkIn || reservation.date;\n        if (!checkInDate) return;\n        if (!groupedData[checkInDate]) {\n          groupedData[checkInDate] = [];\n        }\n        groupedData[checkInDate].push({\n          id: reservation.id,\n          petName: reservation.petName,\n          ownerName: reservation.ownerName || '고객',\n          checkIn: checkInDate,\n          checkOut: reservation.checkOut || '미정',\n          roomType: reservation.roomType || '일반룸',\n          phone: reservation.phone,\n          status: reservation.status\n        });\n      });\n      setHotelData(groupedData);\n    } catch (error) {\n      console.warn('호텔 예약 데이터 로드 실패:', error);\n      generateMockHotelData();\n    }\n  };\n\n  // 모의 호텔 데이터 생성 (개발용)\n  const generateMockHotelData = () => {\n    const data: HotelData = {};\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const petNames = ['초코', '바둑이', '뽀삐', '코코', '몽이', '루루', '보리', '콩이', '마루', '하늘'];\n    const ownerNames = ['김민수', '이영희', '박철수', '정수진', '최동훈', '한지민', '송민호', '윤서연', '장미영', '오준석'];\n    const roomTypes = ['소형견룸', '중형견룸', '대형견룸', '고양이룸', '프리미엄룸'];\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(year, month, day);\n      const dateString = date.toISOString().split('T')[0];\n      // 주말과 평일에 따른 예약 패턴\n      const isWeekend = date.getDay() === 0 || date.getDay() === 6;\n      const maxReservations = isWeekend ? 8 : 5;\n      const numReservations = Math.floor(Math.random() * maxReservations);\n      if (numReservations > 0) {\n        const dayReservations: HotelReservation[] = [];\n        for (let i = 0; i < numReservations; i++) {\n          const checkOutDate = new Date(date);\n          checkOutDate.setDate(checkOutDate.getDate() + Math.floor(Math.random() * 5) + 1);\n          dayReservations.push({\n            id: `hotel-${dateString}-${i}`,\n            petName: petNames[Math.floor(Math.random() * petNames.length)],\n            ownerName: ownerNames[Math.floor(Math.random() * ownerNames.length)],\n            checkIn: dateString,\n            checkOut: checkOutDate.toISOString().split('T')[0],\n            roomType: roomTypes[Math.floor(Math.random() * roomTypes.length)],\n            phone: `010-${Math.floor(Math.random() * 9000) + 1000}-${Math.floor(Math.random() * 9000) + 1000}`,\n            status: ['confirmed', 'pending', 'completed'][Math.floor(Math.random() * 3)] as any\n          });\n        }\n        data[dateString] = dayReservations;\n      }\n    }\n    setHotelData(data);\n  };\n\n  const getDaysInMonth = () => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    const days: (number | null)[] = [];\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      days.push(null);\n    }\n    for (let day = 1; day <= daysInMonth; day++) {\n      days.push(day);\n    }\n    return days;\n  };\n\n  // 날짜 문자열을 로컬 시간 기준(한국 시간)으로 반환하는 함수\n  // toISOString()은 UTC 기준으로 날짜를 문자열로 반환하여 하루가 밀리는 문제가 발생할 수 있으므로\n  // 연도/월/일을 직접 조합하여 \"YYYY-MM-DD\" 형식의 문자열을 생성한다.\n  const getDateString = (day: number) => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth() + 1;\n    const monthStr = month.toString().padStart(2, '0');\n    const dayStr = day.toString().padStart(2, '0');\n    return `${year}-${monthStr}-${dayStr}`;\n  };\n\n  const getReservationCount = (day: number) => {\n    const dateString = getDateString(day);\n    return hotelData[dateString]?.length || 0;\n  };\n\n  const getStatusColor = (count: number) => {\n    if (count === 0) return 'bg-gray-100 text-gray-500';\n    if (count <= 3) return 'bg-green-100 text-green-700';\n    if (count <= 6) return 'bg-yellow-100 text-yellow-700';\n    return 'bg-red-100 text-red-700';\n  };\n\n  const getStatusText = (count: number) => {\n    if (count === 0) return '예약없음';\n    if (count <= 3) return '여유';\n    if (count <= 6) return '보통';\n    return '만실';\n  };\n\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    const newDate = new Date(currentDate);\n    if (direction === 'prev') {\n      newDate.setMonth(newDate.getMonth() - 1);\n    } else {\n      newDate.setMonth(newDate.getMonth() + 1);\n    }\n    setCurrentDate(newDate);\n    setSelectedDate(null);\n    // 폼을 초기화\n    setShowAddForm(false);\n    setNewReservation({ petName: '', ownerName: '', checkOut: '', roomType: '', phone: '' });\n  };\n\n  const handleDateClick = (day: number) => {\n    const dateString = getDateString(day);\n    setSelectedDate(selectedDate === dateString ? null : dateString);\n    // 날짜를 바꿀 때 폼을 초기화\n    setShowAddForm(false);\n    setNewReservation({ petName: '', ownerName: '', checkOut: '', roomType: '', phone: '' });\n  };\n\n  const getReservationStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'completed': return 'bg-blue-100 text-blue-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // 새 예약 폼 입력 핸들러\n  const handleNewChange = (field: keyof typeof newReservation, value: string) => {\n    setNewReservation((prev) => ({ ...prev, [field]: value }));\n  };\n\n  // 호텔 예약 추가\n  const addReservation = () => {\n    if (!selectedDate) return;\n    const reservations = JSON.parse(localStorage.getItem('hotelReservations') || '[]');\n    const newRes: any = {\n      id: `hotel-${selectedDate}-${Date.now()}`,\n      petName: newReservation.petName || '반려동물',\n      ownerName: newReservation.ownerName || '고객',\n      checkIn: selectedDate,\n      checkOut: newReservation.checkOut || selectedDate,\n      roomType: newReservation.roomType || '일반룸',\n      phone: newReservation.phone || '',\n      status: 'confirmed'\n    };\n    reservations.push(newRes);\n    localStorage.setItem('hotelReservations', JSON.stringify(reservations));\n    // 폼 초기화 및 닫기\n    setNewReservation({ petName: '', ownerName: '', checkOut: '', roomType: '', phone: '' });\n    setShowAddForm(false);\n    loadHotelData();\n    window.dispatchEvent(new CustomEvent('reservationUpdated'));\n  };\n\n  // 호텔 예약 삭제\n  const deleteReservation = (id: string) => {\n    const reservations = JSON.parse(localStorage.getItem('hotelReservations') || '[]');\n    const newData = reservations.filter((r: any) => r.id !== id);\n    localStorage.setItem('hotelReservations', JSON.stringify(newData));\n    loadHotelData();\n    window.dispatchEvent(new CustomEvent('reservationUpdated'));\n  };\n\n  const monthNames = ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'];\n  const dayNames = ['일','월','화','수','목','금','토'];\n  const today = new Date().toISOString().split('T')[0];\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            <i className=\"ri-hotel-line mr-2 text-blue-600\"></i>\n            호텔 예약 달력\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <button onClick={() => navigateMonth('prev')} className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer\">\n              <i className=\"ri-arrow-left-line text-gray-600\"></i>\n            </button>\n            <h4 className=\"text-xl font-semibold text-gray-800 min-w-[120px] text-center\">\n              {currentDate.getFullYear()}년 {monthNames[currentDate.getMonth()]}\n            </h4>\n            <button onClick={() => navigateMonth('next')} className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer\">\n              <i className=\"ri-arrow-right-line text-gray-600\"></i>\n            </button>\n          </div>\n        </div>\n        {/* 범례 */}\n        <div className=\"flex items-center justify-center space-x-6 mb-6 p-4 bg-blue-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-gray-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">예약없음</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-green-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">여유 (1-3건)</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-yellow-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">보통 (4-6건)</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-4 h-4 bg-red-100 rounded\"></div>\n            <span className=\"text-sm text-gray-700\">만실 (7건+)</span>\n          </div>\n        </div>\n      </div>\n      {/* 달력 헤더 */}\n      <div className=\"grid grid-cols-7 gap-1 mb-2\">\n        {dayNames.map((day, index) => (\n          <div key={day} className={`p-3 text-center font-semibold text-sm ${index === 0 ? 'text-red-600' : index === 6 ? 'text-blue-600' : 'text-gray-700'}`}>{day}</div>\n        ))}\n      </div>\n      {/* 달력 본체 */}\n      <div className=\"grid grid-cols-7 gap-1\">\n        {getDaysInMonth().map((day, index) => {\n          if (day === null) {\n            return <div key={index} className=\"p-3\"></div>;\n          }\n          const dateString = getDateString(day);\n          const reservationCount = getReservationCount(day);\n          const isToday = dateString === today;\n          const isSelected = selectedDate === dateString;\n          return (\n            <div key={day} onClick={() => handleDateClick(day)} className={`relative p-3 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md ${isToday ? 'ring-2 ring-blue-500' : ''} ${isSelected ? 'bg-blue-50 border-blue-300' : 'hover:bg-gray-50'}`}>\n              <div className=\"text-center\">\n                <div className={`text-lg font-semibold mb-1 ${index % 7 === 0 ? 'text-red-600' : index % 7 === 6 ? 'text-blue-600' : 'text-gray-900'}`}>{day}</div>\n                <div className=\"space-y-1\">\n                  <div className={`text-xs px-2 py-1 rounded-full ${getStatusColor(reservationCount)}`}>{getStatusText(reservationCount)}</div>\n                  {reservationCount > 0 && <div className=\"text-xs text-gray-600\">{reservationCount}건 예약</div>}\n                </div>\n              </div>\n              {isToday && <div className=\"absolute top-1 right-1\"><div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div></div>}\n            </div>\n          );\n        })}\n      </div>\n      {/* 선택된 날짜 상세 정보 */}\n      {selectedDate && hotelData[selectedDate] && (\n        <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n          <h4 className=\"font-semibold text-blue-900 mb-3\">\n            {new Date(selectedDate).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })} 호텔 예약 현황\n          </h4>\n          <div className=\"space-y-3\">\n            {hotelData[selectedDate].map((reservation, index) => (\n              <div key={index} className=\"bg-white rounded-lg p-3 border border-blue-200\">\n                <div className=\"flex justify-between items-start\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-1\">\n                      <span className=\"font-semibold text-gray-900\">{reservation.petName}</span>\n                      <span className={`text-xs px-2 py-1 rounded-full ${getReservationStatusColor(reservation.status)}`}>{reservation.status === 'confirmed' ? '확정' : reservation.status === 'pending' ? '대기' : reservation.status === 'completed' ? '완료' : '취소'}</span>\n                    </div>\n                    <div className=\"text-sm text-gray-700\">\n                      <div className=\"flex items-center space-x-4\">\n                        <span><strong>보호자:</strong> {reservation.ownerName}</span>\n                        <span><strong>룸타입:</strong> {reservation.roomType}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-4 mt-1\">\n                        <span><strong>체크인:</strong> {reservation.checkIn}</span>\n                        <span><strong>체크아웃:</strong> {reservation.checkOut}</span>\n                      </div>\n                      <div className=\"mt-1\">\n                        <span><strong>연락처:</strong> {reservation.phone}</span>\n                      </div>\n                    </div>\n                  </div>\n                  {/* 삭제 버튼 */}\n                  <button onClick={() => deleteReservation(reservation.id)} className=\"text-red-500 text-xs ml-2\">삭제</button>\n                </div>\n              </div>\n            ))}\n          </div>\n          {/* 예약 추가/폼 */}\n          <div className=\"mt-4\">\n            {showAddForm ? (\n              <div className=\"space-y-2\">\n                <input type=\"text\" placeholder=\"반려동물 이름\" value={newReservation.petName} onChange={(e) => handleNewChange('petName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"보호자 이름\" value={newReservation.ownerName} onChange={(e) => handleNewChange('ownerName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"date\" placeholder=\"체크아웃\" value={newReservation.checkOut} onChange={(e) => handleNewChange('checkOut', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"룸타입\" value={newReservation.roomType} onChange={(e) => handleNewChange('roomType', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"연락처\" value={newReservation.phone} onChange={(e) => handleNewChange('phone', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <div className=\"flex space-x-2\">\n                  <button onClick={addReservation} className=\"bg-blue-500 text-white px-3 py-1 rounded\">추가</button>\n                  <button onClick={() => { setShowAddForm(false); setNewReservation({ petName: '', ownerName: '', checkOut: '', roomType: '', phone: '' }); }} className=\"border px-3 py-1 rounded\">취소</button>\n                </div>\n              </div>\n            ) : (\n              <button onClick={() => setShowAddForm(true)} className=\"bg-blue-500 text-white px-3 py-1 rounded\">예약 추가</button>\n            )}\n          </div>\n        </div>\n      )}\n      {/* 예약이 없는 날짜에 대한 안내와 추가 폼 */}\n      {selectedDate && !hotelData[selectedDate] && (\n        <div className=\"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n          <h4 className=\"font-semibold text-gray-700 mb-2\">\n            {new Date(selectedDate).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}\n          </h4>\n          <p className=\"text-gray-600 mb-4\">이 날은 호텔 예약이 없습니다.</p>\n          {/* 예약이 없는 날에도 새 예약 추가 가능 */}\n          <div>\n            {showAddForm ? (\n              <div className=\"space-y-2\">\n                <input type=\"text\" placeholder=\"반려동물 이름\" value={newReservation.petName} onChange={(e) => handleNewChange('petName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"보호자 이름\" value={newReservation.ownerName} onChange={(e) => handleNewChange('ownerName', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"date\" placeholder=\"체크아웃\" value={newReservation.checkOut} onChange={(e) => handleNewChange('checkOut', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"룸타입\" value={newReservation.roomType} onChange={(e) => handleNewChange('roomType', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <input type=\"text\" placeholder=\"연락처\" value={newReservation.phone} onChange={(e) => handleNewChange('phone', e.target.value)} className=\"w-full border p-2 rounded\" />\n                <div className=\"flex space-x-2\">\n                  <button onClick={addReservation} className=\"bg-blue-500 text-white px-3 py-1 rounded\">추가</button>\n                  <button onClick={() => { setShowAddForm(false); setNewReservation({ petName: '', ownerName: '', checkOut: '', roomType: '', phone: '' }); }} className=\"border px-3 py-1 rounded\">취소</button>\n                </div>\n              </div>\n            ) : (\n              <button onClick={() => setShowAddForm(true)} className=\"bg-blue-500 text-white px-3 py-1 rounded\">예약 추가</button>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useEffect } from 'react';\r\n\r\n// 실시간 예약 동기화를 위한 유틸리티 컴포넌트\r\n// 브라우저의 localStorage에 전체 예약과 서비스별 예약 데이터를 초기화하고,\r\n// 스토리지 변경을 감지하여 다른 컴포넌트에 업데이트 이벤트를 전달합니다.\r\nexport default function RealtimeReservationSync() {\r\n  useEffect(() => {\r\n    // 초기화: 로컬 스토리지에 필요한 키가 없으면 빈 배열로 생성\r\n    const initializeReservationData = () => {\r\n      if (!localStorage.getItem('allReservations')) {\r\n        localStorage.setItem('allReservations', JSON.stringify([]));\r\n      }\r\n      if (!localStorage.getItem('hotelReservations')) {\r\n        localStorage.setItem('hotelReservations', JSON.stringify([]));\r\n      }\r\n      if (!localStorage.getItem('groomingReservations')) {\r\n        localStorage.setItem('groomingReservations', JSON.stringify([]));\r\n      }\r\n      // 새로운 데이케어 예약 저장소 초기화\r\n      if (!localStorage.getItem('daycareReservations')) {\r\n        localStorage.setItem('daycareReservations', JSON.stringify([]));\r\n      }\r\n    };\r\n\r\n    initializeReservationData();\r\n\r\n    // 다른 탭에서 localStorage가 변경될 때 변경을 감지하여 커스텀 이벤트를 발생\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (\r\n        e.key === 'allReservations' ||\r\n        e.key === 'hotelReservations' ||\r\n        e.key === 'groomingReservations' ||\r\n        e.key === 'daycareReservations'\r\n      ) {\r\n        window.dispatchEvent(new CustomEvent('reservationUpdated'));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n  return null; // UI를 렌더링하지 않는 유틸리티 컴포넌트\r\n}\r\n\r\n// 예약 데이터를 localStorage에 업데이트하는 유틸리티 함수\r\n// 전체 예약(allReservations)과 서비스별 예약(hotel/grooming/daycare) 배열에 새 예약을 추가/업데이트한 후\r\n// reservationUpdated 이벤트를 발생시켜 달력 컴포넌트가 새 데이터를 불러오도록 합니다.\r\n// 중복 방지: 동일한 ID가 있으면 기존 예약을 업데이트하고, 없으면 추가합니다.\r\nexport const updateReservationData = (\r\n  newReservation: any,\r\n  type: 'hotel' | 'grooming' | 'daycare'\r\n) => {\r\n  // 전체 예약 데이터 업데이트\r\n  const allReservations = JSON.parse(localStorage.getItem('allReservations') || '[]');\r\n  const allIndex = allReservations.findIndex((r: any) => r.id === newReservation.id);\r\n  if (allIndex !== -1) {\r\n    // 기존 예약 업데이트\r\n    allReservations[allIndex] = newReservation;\r\n  } else {\r\n    // 새 예약 추가\r\n    allReservations.push(newReservation);\r\n  }\r\n  localStorage.setItem('allReservations', JSON.stringify(allReservations));\r\n\r\n  // 서비스별 예약 데이터 업데이트\r\n  let serviceKey: string;\r\n  switch (type) {\r\n    case 'hotel':\r\n      serviceKey = 'hotelReservations';\r\n      break;\r\n    case 'grooming':\r\n      serviceKey = 'groomingReservations';\r\n      break;\r\n    case 'daycare':\r\n      serviceKey = 'daycareReservations';\r\n      break;\r\n    default:\r\n      serviceKey = 'groomingReservations';\r\n  }\r\n  const serviceReservations = JSON.parse(localStorage.getItem(serviceKey) || '[]');\r\n  const serviceIndex = serviceReservations.findIndex((r: any) => r.id === newReservation.id);\r\n  if (serviceIndex !== -1) {\r\n    // 기존 예약 업데이트\r\n    serviceReservations[serviceIndex] = newReservation;\r\n  } else {\r\n    // 새 예약 추가\r\n    serviceReservations.push(newReservation);\r\n  }\r\n  localStorage.setItem(serviceKey, JSON.stringify(serviceReservations));\r\n\r\n  // 다른 컴포넌트에게 데이터 변경을 알림\r\n  window.dispatchEvent(new CustomEvent('reservationUpdated'));\r\n  \r\n  // 콘솔 로그로 디버깅 정보 출력\r\n  console.log(`✅ 예약 업데이트 완료: ${type} - ${newReservation.petName} (${newReservation.id})`);\r\n};\r\n\r\n// 선택된 예약을 localStorage에서 제거하는 함수\r\n// 주어진 ID 배열에 해당하는 예약을 전체 예약과 각 서비스별 예약 목록에서 삭제하고\r\n// reservationUpdated 이벤트를 발생시켜 달력 데이터를 갱신합니다.\r\nexport const removeReservationData = (ids: string[]) => {\r\n  if (!ids?.length) return;\r\n  // 전체 예약 배열에서 제거\r\n  const allReservations = JSON.parse(localStorage.getItem('allReservations') || '[]');\r\n  const filteredAll = allReservations.filter((r: any) => !ids.includes(r.id));\r\n  localStorage.setItem('allReservations', JSON.stringify(filteredAll));\r\n\r\n  // 서비스별 배열에서 제거\r\n  const keys = ['hotelReservations', 'groomingReservations', 'daycareReservations'];\r\n  keys.forEach((key) => {\r\n    const list = JSON.parse(localStorage.getItem(key) || '[]');\r\n    const filtered = list.filter((r: any) => !ids.includes(r.id));\r\n    localStorage.setItem(key, JSON.stringify(filtered));\r\n  });\r\n\r\n  // 변경 알림\r\n  window.dispatchEvent(new CustomEvent('reservationUpdated'));\r\n};\r\n\r\n// 예약 통계를 반환하는 유틸리티 함수\r\nexport const getReservationStats = () => {\r\n  const allReservations = JSON.parse(localStorage.getItem('allReservations') || '[]');\r\n  const today = new Date().toISOString().split('T')[0];\r\n  return {\r\n    total: allReservations.length,\r\n    today: allReservations.filter((r: any) => (r.date || r.checkIn) === today).length,\r\n    hotel: allReservations.filter((r: any) => r.service === 'hotel').length,\r\n    grooming: allReservations.filter((r: any) => r.service === 'grooming').length,\r\n    daycare: allReservations.filter((r: any) => r.service === 'daycare').length,\r\n    pending: allReservations.filter((r: any) => r.status === 'pending').length,\r\n    confirmed: allReservations.filter((r: any) => r.status === 'confirmed').length,\r\n    completed: allReservations.filter((r: any) => r.status === 'completed').length\r\n  };\r\n};","// realSMS.ts - 완전 수정 버전 (모든 문제 해결)\n\nimport type { Reservation } from './supabase';\n\nconst isDev = (import.meta.env?.DEV ?? import.meta.env?.MODE === 'development') === true;\nconst DEFAULT_ENDPOINT = isDev\n  ? 'http://localhost:3000/api/sms/confirm'\n  : '/api/sms/confirm';\n\nconst hasCustomEndpoint =\n  !!import.meta.env?.VITE_SMS_ENDPOINT && import.meta.env.VITE_SMS_ENDPOINT.length > 0;\nconst forceCustomEndpoint =\n  (import.meta.env?.VITE_SMS_FORCE_ENDPOINT ?? '').toString().toLowerCase() === 'true';\n\nconst shouldUseCustomEndpoint = hasCustomEndpoint && (!isDev || forceCustomEndpoint);\n\nconst windowOrigin = typeof window !== 'undefined' ? window.location.origin : '';\nconst sameOriginEndpoint = windowOrigin ? `${windowOrigin}${DEFAULT_ENDPOINT}` : DEFAULT_ENDPOINT;\n\nconst API_URL = shouldUseCustomEndpoint\n  ? import.meta.env.VITE_SMS_ENDPOINT!\n  : isDev && windowOrigin.includes('localhost')\n  ? DEFAULT_ENDPOINT\n  : sameOriginEndpoint;\n\n// ✅ SMS 에러 클래스\nclass SMSError extends Error {\n  constructor(\n    public code: string,\n    public statusCode?: number,\n    message?: string\n  ) {\n    super(message || `SMS Error: ${code}`);\n    this.name = 'SMSError';\n  }\n}\n\n// ✅ 재시도 로직\nasync function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\ninterface FetchOptions extends RequestInit {\n  retries?: number;\n  timeout?: number;\n}\n\nasync function fetchWithRetry(\n  url: string,\n  options: FetchOptions = {}\n): Promise<Response> {\n  const {\n    retries = 3,\n    timeout = 15000,\n    ...fetchOptions\n  } = options;\n\n  let lastError: Error | null = null;\n\n  for (let attempt = 1; attempt <= retries; attempt++) {\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n      const response = await fetch(url, {\n        ...fetchOptions,\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      // ✅ 성공 응답\n      if (response.ok) {\n        return response;\n      }\n\n      // ✅ 재시도 가능한 에러 (5xx, 429)\n      if (response.status >= 500 || response.status === 429) {\n        if (attempt < retries) {\n          const delay = 1000 * attempt;\n          console.warn(\n            `⚠️  재시도 ${attempt}/${retries} (${delay}ms 후): HTTP ${response.status}`\n          );\n          await sleep(delay);\n          continue;\n        }\n      }\n\n      // ✅ 재시도 불가능한 에러 (4xx)\n      throw new SMSError(\n        'HTTP_ERROR',\n        response.status,\n        `HTTP ${response.status}: ${response.statusText}`\n      );\n    } catch (error) {\n      lastError = error as Error;\n\n      if (error instanceof SMSError) {\n        throw error;\n      }\n\n      if (error instanceof TypeError && error.message.includes('fetch')) {\n        if (attempt < retries) {\n          const delay = 1000 * attempt;\n          console.warn(\n            `⚠️  재시도 ${attempt}/${retries} (${delay}ms 후): 네트워크 오류`\n          );\n          await sleep(delay);\n          continue;\n        }\n      }\n\n      throw new SMSError(\n        'NETWORK_ERROR',\n        undefined,\n        `네트워크 오류: ${lastError.message}`\n      );\n    }\n  }\n\n  throw lastError || new SMSError('UNKNOWN_ERROR', undefined, '알 수 없는 오류');\n}\n\n// ✅ 안전한 JSON 파싱\nasync function parseResponse<T>(response: Response): Promise<T> {\n  const contentType = response.headers.get('content-type');\n  const text = await response.text();\n\n  // ✅ 빈 응답 체크\n  if (!text) {\n    throw new SMSError(\n      'EMPTY_RESPONSE',\n      response.status,\n      'API 응답이 비어있습니다'\n    );\n  }\n\n  // ✅ JSON 형식 체크\n  if (!contentType?.includes('application/json')) {\n    throw new SMSError(\n      'INVALID_CONTENT_TYPE',\n      response.status,\n      `예상치 못한 Content-Type: ${contentType}`\n    );\n  }\n\n  try {\n    return JSON.parse(text) as T;\n  } catch (error) {\n    throw new SMSError(\n      'JSON_PARSE_ERROR',\n      response.status,\n      `JSON 파싱 실패: ${text.substring(0, 100)}`\n    );\n  }\n}\n\ninterface SMSResponse {\n  success: boolean;\n  messageId?: string;\n  error?: string;\n}\n\nexport const realSMSService = {\n  async sendConfirmation(reservation: Reservation) {\n    const message = `[PuppyHotel] ${reservation.owner_name}님의 ${reservation.pet_name} ${\n      reservation.service === 'grooming'\n        ? '미용'\n        : reservation.service === 'hotel'\n        ? '호텔'\n        : '데이케어'\n    } 예약이 확정되었습니다. 일시: ${reservation.reservation_date} ${\n      reservation.reservation_time || ''\n    }.`;\n\n    console.log('========================================');\n    console.log('📱 SMS 발송 시작');\n    console.log('========================================');\n    console.log('수신자:', reservation.phone);\n    console.log('메시지:', message);\n    console.log('API URL:', API_URL);\n    console.log('========================================');\n\n    try {\n      const phoneNumber = reservation.phone?.replace(/[^0-9]/g, '');\n\n      if (!phoneNumber) {\n        throw new SMSError(\n          'INVALID_PHONE',\n          undefined,\n          '유효한 전화번호가 없습니다'\n        );\n      }\n\n      const payload = {\n        to: phoneNumber,\n        message,\n        text: message,\n        reservationId: reservation.id,\n        customerName: reservation.owner_name,\n      };\n\n      console.log('🚀 API 호출 시작');\n\n      const response = await fetchWithRetry(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n        },\n        body: JSON.stringify(payload),\n        retries: 3,\n        timeout: 15000,\n      });\n\n      console.log('📥 응답 상태:', response.status);\n\n      const data = await parseResponse<SMSResponse>(response);\n\n      console.log('========================================');\n      console.log('✅ SMS 발송 성공!');\n      console.log('📧 메시지 ID:', data.messageId || 'N/A');\n      console.log('========================================');\n\n      return {\n        success: true,\n        message: 'SMS 발송 완료',\n        data,\n      };\n    } catch (error) {\n      console.log('========================================');\n      console.log('❌ SMS 발송 실패');\n\n      if (error instanceof SMSError) {\n        console.error(`에러 코드: ${error.code}`);\n        console.error(`상태 코드: ${error.statusCode || 'N/A'}`);\n        console.error(`메시지: ${error.message}`);\n      } else {\n        console.error('에러:', error);\n      }\n\n      console.log('========================================');\n\n      return {\n        success: false,\n        error:\n          error instanceof SMSError\n            ? error.message\n            : error instanceof Error\n            ? error.message\n            : 'SMS 발송 실패',\n        message: '예약은 확정되었으나 SMS 발송에 실패했습니다.',\n      };\n    }\n  },\n};\n\nexport { SMSError };","// 대시보드 Supabase 연동 헬퍼 파일 (커스텀 버전)\nimport { reservationService } from './supabase';\nimport { realSMSService } from './realSMS';\nimport type { Reservation } from './supabase';\n// 로컬 스토리지 업데이트를 위해 실시간 동기화 유틸리티 가져오기\nimport {\n  updateReservationData,\n  removeReservationData,\n} from '../components/feature/RealtimeReservationSync';\n\n// Supabase 예약 데이터를 대시보드 형식으로 변환\nexport function convertToLegacyFormat(reservation: Reservation) {\n  return {\n    id: reservation.id,\n    petName: reservation.pet_name,\n    ownerName: reservation.owner_name,\n    service: reservation.service,\n    date: reservation.reservation_date,\n    time: reservation.reservation_time || '미정',\n    status: reservation.status,\n    phone: reservation.phone,\n    roomType: reservation.room_type,\n    checkIn: reservation.check_in,\n    checkOut: reservation.check_out,\n    style: reservation.grooming_style,\n  };\n}\n\n// 대시보드 형식을 Supabase 형식으로 변환\nexport function convertToSupabaseFormat(reservation: any) {\n  return {\n    pet_name: reservation.petName,\n    owner_name: reservation.ownerName,\n    service: reservation.service,\n    reservation_date: reservation.date || reservation.checkIn,\n    reservation_time: reservation.time,\n    status: reservation.status,\n    phone: reservation.phone,\n    room_type: reservation.roomType,\n    check_in: reservation.checkIn,\n    check_out: reservation.checkOut,\n    grooming_style: reservation.style,\n  };\n}\n\n// 실시간 예약 데이터 가져오기\nexport async function loadAllReservations() {\n  try {\n    const data = await reservationService.getAll();\n    // Convert to legacy format and filter out soft-deleted (cancelled) reservations.\n    return data\n      .map(convertToLegacyFormat)\n      .filter((r) => r.status !== 'cancelled' && r.status !== 'deleted');\n  } catch (error) {\n    console.error('예약 데이터 로드 실패:', error);\n    return [];\n  }\n}\n\n// Soft delete reservations by updating status to 'cancelled'.\n// Returns an object with success flag and list of updated reservations (legacy format).\nexport async function softDeleteReservations(ids: string[]) {\n  if (!ids || ids.length === 0) {\n    return { success: false, error: 'No reservation IDs provided' };\n  }\n  try {\n    // Perform status update on each reservation. Do not send SMS when soft deleting.\n    const results = await Promise.all(\n      ids.map(async (id) => {\n        const res = await updateReservationStatus(id, 'cancelled', false);\n        return res;\n      }),\n    );\n    // Extract updated data where success is true\n    const updated = results\n      .filter((r) => r.success)\n      .map((r) => r.data);\n    return { success: true, data: updated };\n  } catch (error) {\n    console.error('소프트 삭제 실패:', error);\n    return { success: false, error };\n  }\n}\n\n// 예약 상태 업데이트 + SMS 자동 발송\nexport async function updateReservationStatus(\n  reservationId: string,\n  newStatus: string,\n  sendSMS: boolean = true,\n) {\n  try {\n    const updated = await reservationService.update(reservationId, {\n      status: newStatus as any,\n    });\n\n    // pending -> confirmed 변경 시 SMS 발송\n    if (sendSMS && newStatus === 'confirmed') {\n      try {\n        const smsResult = await realSMSService.sendConfirmation(updated);\n        if (smsResult.success) {\n          console.log('✅ SMS 발송 성공');\n        } else {\n          console.warn('⚠️ SMS 발송 실패:', smsResult.error);\n        }\n      } catch (error) {\n        console.warn('⚠️ SMS 발송 실패 (무시하고 계속):', error);\n      }\n    }\n\n    return { success: true, data: convertToLegacyFormat(updated) };\n  } catch (error) {\n    console.error('상태 업데이트 실패:', error);\n    return { success: false, error };\n  }\n}\n\n// 실시간 구독 설정\n// Supabase에서 새로운 예약/수정/삭제 이벤트를 감지하여 콜백을 호출하고\n// 로컬 스토리지에도 변경 사항을 반영한다.\nexport function subscribeToReservations(callback: (data: any) => void) {\n  return reservationService.subscribeToChanges((payload: any) => {\n    console.log('예약 변경 감지:', payload);\n    // INSERT, UPDATE, DELETE 이벤트 처리\n    if (payload.eventType === 'INSERT' || payload.eventType === 'UPDATE') {\n      const legacy = convertToLegacyFormat(payload.new as Reservation);\n      // Always notify callback\n      callback({ type: payload.eventType, data: legacy });\n      try {\n        // For soft-deleted reservations (status cancelled or deleted), remove from localStorage and skip re-adding.\n        if (legacy.status === 'cancelled' || legacy.status === 'deleted') {\n          removeReservationData([legacy.id]);\n        } else {\n          // Remove any existing entry to avoid duplicates\n          removeReservationData([legacy.id]);\n          updateReservationData(legacy, legacy.service as any);\n        }\n      } catch (e) {\n        console.warn('localStorage 예약 동기화 실패:', e);\n      }\n    } else if (payload.eventType === 'DELETE') {\n      const id = payload.old.id;\n      callback({ type: 'DELETE', id });\n      try {\n        removeReservationData([id]);\n      } catch (e) {\n        console.warn('localStorage 예약 삭제 동기화 실패:', e);\n      }\n    }\n  });\n}"],"names":["GroomingCalendar","currentDate","setCurrentDate","useState","groomingData","setGroomingData","selectedDate","setSelectedDate","showAddForm","setShowAddForm","newReservation","setNewReservation","useEffect","loadGroomingData","handleReservationUpdate","allRaw","groomingRaw","reservations","fromAll","r","e","fromGrooming","generateMockGroomingData","seenIds","deduped","res","groupedData","reservation","date","a","b","error","data","year","month","daysInMonth","timeSlots","petNames","ownerNames","styles","day","dateString","maxReservations","numReservations","dayReservations","usedTimes","i","time","getDaysInMonth","firstDay","startingDayOfWeek","days","getDateString","monthStr","dayStr","getReservationCount","getStatusColor","count","getStatusText","navigateMonth","direction","newDate","handleDateClick","getReservationStatusColor","status","handleNewChange","field","value","prev","addReservation","newRes","deleteReservation","id","newData","monthNames","dayNames","today","jsxs","jsx","index","reservationCount","isToday","isSelected","HotelCalendar","hotelData","setHotelData","loadHotelData","hotelRaw","fromHotel","generateMockHotelData","checkInDate","roomTypes","checkOutDate","RealtimeReservationSync","handleStorageChange","updateReservationData","type","allReservations","allIndex","serviceKey","serviceReservations","serviceIndex","removeReservationData","ids","filteredAll","key","filtered","DEFAULT_ENDPOINT","hasCustomEndpoint","shouldUseCustomEndpoint","windowOrigin","sameOriginEndpoint","API_URL","SMSError","code","statusCode","message","sleep","ms","resolve","fetchWithRetry","url","options","retries","timeout","fetchOptions","lastError","attempt","controller","timeoutId","response","delay","parseResponse","contentType","text","realSMSService","phoneNumber","payload","convertToLegacyFormat","loadAllReservations","reservationService","updateReservationStatus","reservationId","newStatus","sendSMS","updated","smsResult","subscribeToReservations","callback","legacy"],"mappings":"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"}
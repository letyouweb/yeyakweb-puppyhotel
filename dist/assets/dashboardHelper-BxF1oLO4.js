import{r as v,j as e}from"./index-CW6kU9JK.js";import{r as z}from"./supabase-CYJPoJ9i.js";function ie(){const[s,c]=v.useState(new Date),[o,g]=v.useState({}),[r,f]=v.useState(null),[N,m]=v.useState(!1),[d,x]=v.useState({petName:"",ownerName:"",time:"",phone:"",style:""});v.useEffect(()=>{b();const t=()=>{b()};return window.addEventListener("reservationUpdated",t),()=>{window.removeEventListener("reservationUpdated",t)}},[s]);const b=()=>{try{const t=localStorage.getItem("allReservations"),a=localStorage.getItem("groomingReservations");let l=[];if(t)try{const i=JSON.parse(t).filter(w=>w&&w.service==="grooming");l=l.concat(i)}catch(n){console.warn("allReservations íŒŒì‹± ì‹¤íŒ¨:",n)}if(a)try{const n=JSON.parse(a);l=l.concat(n)}catch(n){console.warn("groomingReservations íŒŒì‹± ì‹¤íŒ¨:",n)}if(!l.length){M();return}const h=new Set,u=[];for(const n of l)!n||!n.id||h.has(n.id)||(h.add(n.id),u.push(n));const p={};u.forEach(n=>{const i=n.date;i&&(p[i]||(p[i]=[]),p[i].push({id:n.id,petName:n.petName,ownerName:n.ownerName||"ê³ ê°",time:n.time,phone:n.phone,style:n.style||"ê¸°ë³¸ë¯¸ìš©",status:n.status}))}),Object.keys(p).forEach(n=>{p[n].sort((i,w)=>i.time.localeCompare(w.time))}),g(p)}catch(t){console.warn("ë¯¸ìš© ì˜ˆì•½ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",t),M()}},M=()=>{const t={},a=s.getFullYear(),l=s.getMonth(),h=new Date(a,l+1,0).getDate(),u=["09:00","10:00","11:00","13:00","14:00","15:00","16:00","17:00"],p=["ì´ˆì½”","ë°”ë‘‘ì´","ë½€ì‚","ì½”ì½”","ëª½ì´","ë£¨ë£¨","ë³´ë¦¬","ì½©ì´"],n=["ê¹€ë¯¼ìˆ˜","ì´ì˜í¬","ë°•ì² ìˆ˜","ì •ìˆ˜ì§„","ìµœë™í›ˆ","í•œì§€ë¯¼","ì†¡ë¯¼í˜¸","ìœ¤ì„œì—°"],i=["ì „ì²´ë¯¸ìš©","ë¶€ë¶„ì»·","ëª©ìš•+ì»·","ë°œí†±ì •ë¦¬","ì–¼êµ´ì»·","ìœ„ìƒë¯¸ìš©"];for(let w=1;w<=h;w++){const R=new Date(a,l,w),K=R.toISOString().split("T")[0],$=R.getDay()===0||R.getDay()===6?6:4,E=Math.floor(Math.random()*$);if(E>0){const D=[],C=new Set;for(let T=0;T<E;T++){let k;do k=u[Math.floor(Math.random()*u.length)];while(C.has(k));C.add(k),D.push({id:`grooming-${K}-${T}`,petName:p[Math.floor(Math.random()*p.length)],ownerName:n[Math.floor(Math.random()*n.length)],time:k,phone:`010-${Math.floor(Math.random()*9e3)+1e3}-${Math.floor(Math.random()*9e3)+1e3}`,style:i[Math.floor(Math.random()*i.length)],status:["confirmed","pending","completed"][Math.floor(Math.random()*3)]})}D.sort((T,k)=>T.time.localeCompare(k.time)),t[K]=D}}g(t)},J=()=>{const t=s.getFullYear(),a=s.getMonth(),l=new Date(t,a,1),u=new Date(t,a+1,0).getDate(),p=l.getDay(),n=[];for(let i=0;i<p;i++)n.push(null);for(let i=1;i<=u;i++)n.push(i);return n},S=t=>{const a=s.getFullYear(),h=(s.getMonth()+1).toString().padStart(2,"0"),u=t.toString().padStart(2,"0");return`${a}-${h}-${u}`},_=t=>{const a=S(t);return o[a]?.length||0},A=t=>t===0?"bg-gray-100 text-gray-500":t<=2?"bg-green-100 text-green-700":t<=4?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",U=t=>t===0?"ì˜ˆì•½ì—†ìŒ":t<=2?"ì—¬ìœ ":t<=4?"ë³´í†µ":"í¬í™”",O=t=>{const a=new Date(s);t==="prev"?a.setMonth(a.getMonth()-1):a.setMonth(a.getMonth()+1),c(a),f(null)},L=t=>{const a=S(t);f(r===a?null:a),m(!1),x({petName:"",ownerName:"",time:"",phone:"",style:""})},P=t=>{switch(t){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=(t,a)=>{x(l=>({...l,[t]:a}))},I=()=>{if(!r)return;const t=JSON.parse(localStorage.getItem("groomingReservations")||"[]"),a={id:`grooming-${r}-${Date.now()}`,petName:d.petName||"ë°˜ë ¤ë™ë¬¼",ownerName:d.ownerName||"ê³ ê°",date:r,time:d.time||"ë¯¸ì •",phone:d.phone||"",style:d.style||"ê¸°ë³¸ë¯¸ìš©",status:"confirmed",service:"grooming"};t.push(a),localStorage.setItem("groomingReservations",JSON.stringify(t)),x({petName:"",ownerName:"",time:"",phone:"",style:""}),m(!1),b(),window.dispatchEvent(new CustomEvent("reservationUpdated"))},F=t=>{const l=JSON.parse(localStorage.getItem("groomingReservations")||"[]").filter(h=>h.id!==t);localStorage.setItem("groomingReservations",JSON.stringify(l)),b(),window.dispatchEvent(new CustomEvent("reservationUpdated"))},H=["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],Y=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "],W=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[e.jsx("i",{className:"ri-scissors-line mr-2 text-yellow-600"}),"ë¯¸ìš© ì˜ˆì•½ ë‹¬ë ¥"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O("prev"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-gray-600"})}),e.jsxs("h4",{className:"text-xl font-semibold text-gray-800 min-w-[120px] text-center",children:[s.getFullYear(),"ë…„ ",H[s.getMonth()]]}),e.jsx("button",{onClick:()=>O("next"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-right-line text-gray-600"})})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 mb-6 p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ì˜ˆì•½ì—†ìŒ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ì—¬ìœ  (1-2ê±´)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ë³´í†µ (3-4ê±´)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"í¬í™” (5ê±´+)"})]})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Y.map((t,a)=>e.jsx("div",{className:`p-3 text-center font-semibold text-sm ${a===0?"text-red-600":a===6?"text-blue-600":"text-gray-700"}`,children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:J().map((t,a)=>{if(t===null)return e.jsx("div",{className:"p-3"},a);const l=S(t),h=_(t),u=l===W,p=r===l;return e.jsxs("div",{onClick:()=>L(t),className:`relative p-3 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md ${u?"ring-2 ring-yellow-500":""} ${p?"bg-yellow-50 border-yellow-300":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-semibold mb-1 ${a%7===0?"text-red-600":a%7===6?"text-blue-600":"text-gray-900"}`,children:t}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${A(h)}`,children:U(h)}),h>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[h,"ê±´ ì˜ˆì•½"]})]})]}),u&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})})]},t)})}),r&&o[r]&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("h4",{className:"font-semibold text-yellow-900 mb-3",children:[new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})," ë¯¸ìš© ì˜ˆì•½ í˜„í™©"]}),e.jsx("div",{className:"space-y-3",children:o[r].map((t,a)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-yellow-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:t.time}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(t.status)}`,children:t.status==="confirmed"?"í™•ì •":t.status==="pending"?"ëŒ€ê¸°":t.status==="completed"?"ì™„ë£Œ":"ì·¨ì†Œ"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"ë°˜ë ¤ë™ë¬¼:"})," ",t.petName]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ë³´í˜¸ì:"})," ",t.ownerName]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"ë¯¸ìš©ìŠ¤íƒ€ì¼:"})," ",t.style]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," ",t.phone]})]})]})]}),e.jsx("button",{onClick:()=>F(t.id),className:"text-red-500 text-xs ml-2",children:"ì‚­ì œ"})]})},a))}),e.jsx("div",{className:"mt-4",children:N?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"ë°˜ë ¤ë™ë¬¼ ì´ë¦„",value:d.petName,onChange:t=>y("petName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë³´í˜¸ì ì´ë¦„",value:d.ownerName,onChange:t=>y("ownerName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"time",value:d.time,onChange:t=>y("time",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ì—°ë½ì²˜",value:d.phone,onChange:t=>y("phone",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë¯¸ìš© ìŠ¤íƒ€ì¼",value:d.style,onChange:t=>y("style",t.target.value),className:"w-full border p-2 rounded"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:I,className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"ì¶”ê°€"}),e.jsx("button",{onClick:()=>{m(!1),x({petName:"",ownerName:"",time:"",phone:"",style:""})},className:"border px-3 py-1 rounded",children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{onClick:()=>m(!0),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"ì˜ˆì•½ ì¶”ê°€"})})]}),r&&!o[r]&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ì´ ë‚ ì€ ë¯¸ìš© ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("div",{children:N?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"ë°˜ë ¤ë™ë¬¼ ì´ë¦„",value:d.petName,onChange:t=>y("petName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë³´í˜¸ì ì´ë¦„",value:d.ownerName,onChange:t=>y("ownerName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"time",value:d.time,onChange:t=>y("time",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ì—°ë½ì²˜",value:d.phone,onChange:t=>y("phone",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë¯¸ìš© ìŠ¤íƒ€ì¼",value:d.style,onChange:t=>y("style",t.target.value),className:"w-full border p-2 rounded"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:I,className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"ì¶”ê°€"}),e.jsx("button",{onClick:()=>{m(!1),x({petName:"",ownerName:"",time:"",phone:"",style:""})},className:"border px-3 py-1 rounded",children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{onClick:()=>m(!0),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"ì˜ˆì•½ ì¶”ê°€"})})]})]})}function de(){const[s,c]=v.useState(new Date),[o,g]=v.useState({}),[r,f]=v.useState(null),[N,m]=v.useState(!1),[d,x]=v.useState({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""});v.useEffect(()=>{b();const t=()=>{b()};return window.addEventListener("reservationUpdated",t),()=>{window.removeEventListener("reservationUpdated",t)}},[s]);const b=()=>{try{const t=localStorage.getItem("allReservations"),a=localStorage.getItem("hotelReservations");let l=[];if(t)try{const i=JSON.parse(t).filter(w=>w&&w.service==="hotel");l=l.concat(i)}catch(n){console.warn("allReservations íŒŒì‹± ì‹¤íŒ¨:",n)}if(a)try{const n=JSON.parse(a);l=l.concat(n)}catch(n){console.warn("hotelReservations íŒŒì‹± ì‹¤íŒ¨:",n)}if(!l.length){M();return}const h=new Set,u=[];for(const n of l)!n||!n.id||h.has(n.id)||(h.add(n.id),u.push(n));const p={};u.forEach(n=>{const i=n.checkIn||n.date;i&&(p[i]||(p[i]=[]),p[i].push({id:n.id,petName:n.petName,ownerName:n.ownerName||"ê³ ê°",checkIn:i,checkOut:n.checkOut||"ë¯¸ì •",roomType:n.roomType||"ì¼ë°˜ë£¸",phone:n.phone,status:n.status}))}),g(p)}catch(t){console.warn("í˜¸í…” ì˜ˆì•½ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",t),M()}},M=()=>{const t={},a=s.getFullYear(),l=s.getMonth(),h=new Date(a,l+1,0).getDate(),u=["ì´ˆì½”","ë°”ë‘‘ì´","ë½€ì‚","ì½”ì½”","ëª½ì´","ë£¨ë£¨","ë³´ë¦¬","ì½©ì´","ë§ˆë£¨","í•˜ëŠ˜"],p=["ê¹€ë¯¼ìˆ˜","ì´ì˜í¬","ë°•ì² ìˆ˜","ì •ìˆ˜ì§„","ìµœë™í›ˆ","í•œì§€ë¯¼","ì†¡ë¯¼í˜¸","ìœ¤ì„œì—°","ì¥ë¯¸ì˜","ì˜¤ì¤€ì„"],n=["ì†Œí˜•ê²¬ë£¸","ì¤‘í˜•ê²¬ë£¸","ëŒ€í˜•ê²¬ë£¸","ê³ ì–‘ì´ë£¸","í”„ë¦¬ë¯¸ì—„ë£¸"];for(let i=1;i<=h;i++){const w=new Date(a,l,i),R=w.toISOString().split("T")[0],q=w.getDay()===0||w.getDay()===6?8:5,$=Math.floor(Math.random()*q);if($>0){const E=[];for(let D=0;D<$;D++){const C=new Date(w);C.setDate(C.getDate()+Math.floor(Math.random()*5)+1),E.push({id:`hotel-${R}-${D}`,petName:u[Math.floor(Math.random()*u.length)],ownerName:p[Math.floor(Math.random()*p.length)],checkIn:R,checkOut:C.toISOString().split("T")[0],roomType:n[Math.floor(Math.random()*n.length)],phone:`010-${Math.floor(Math.random()*9e3)+1e3}-${Math.floor(Math.random()*9e3)+1e3}`,status:["confirmed","pending","completed"][Math.floor(Math.random()*3)]})}t[R]=E}}g(t)},J=()=>{const t=s.getFullYear(),a=s.getMonth(),l=new Date(t,a,1),u=new Date(t,a+1,0).getDate(),p=l.getDay(),n=[];for(let i=0;i<p;i++)n.push(null);for(let i=1;i<=u;i++)n.push(i);return n},S=t=>{const a=s.getFullYear(),h=(s.getMonth()+1).toString().padStart(2,"0"),u=t.toString().padStart(2,"0");return`${a}-${h}-${u}`},_=t=>{const a=S(t);return o[a]?.length||0},A=t=>t===0?"bg-gray-100 text-gray-500":t<=3?"bg-green-100 text-green-700":t<=6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",U=t=>t===0?"ì˜ˆì•½ì—†ìŒ":t<=3?"ì—¬ìœ ":t<=6?"ë³´í†µ":"ë§Œì‹¤",O=t=>{const a=new Date(s);t==="prev"?a.setMonth(a.getMonth()-1):a.setMonth(a.getMonth()+1),c(a),f(null),m(!1),x({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""})},L=t=>{const a=S(t);f(r===a?null:a),m(!1),x({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""})},P=t=>{switch(t){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=(t,a)=>{x(l=>({...l,[t]:a}))},I=()=>{if(!r)return;const t=JSON.parse(localStorage.getItem("hotelReservations")||"[]"),a={id:`hotel-${r}-${Date.now()}`,petName:d.petName||"ë°˜ë ¤ë™ë¬¼",ownerName:d.ownerName||"ê³ ê°",checkIn:r,checkOut:d.checkOut||r,roomType:d.roomType||"ì¼ë°˜ë£¸",phone:d.phone||"",status:"confirmed"};t.push(a),localStorage.setItem("hotelReservations",JSON.stringify(t)),x({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""}),m(!1),b(),window.dispatchEvent(new CustomEvent("reservationUpdated"))},F=t=>{const l=JSON.parse(localStorage.getItem("hotelReservations")||"[]").filter(h=>h.id!==t);localStorage.setItem("hotelReservations",JSON.stringify(l)),b(),window.dispatchEvent(new CustomEvent("reservationUpdated"))},H=["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],Y=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "],W=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[e.jsx("i",{className:"ri-hotel-line mr-2 text-blue-600"}),"í˜¸í…” ì˜ˆì•½ ë‹¬ë ¥"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O("prev"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-gray-600"})}),e.jsxs("h4",{className:"text-xl font-semibold text-gray-800 min-w-[120px] text-center",children:[s.getFullYear(),"ë…„ ",H[s.getMonth()]]}),e.jsx("button",{onClick:()=>O("next"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-right-line text-gray-600"})})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ì˜ˆì•½ì—†ìŒ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ì—¬ìœ  (1-3ê±´)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ë³´í†µ (4-6ê±´)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ë§Œì‹¤ (7ê±´+)"})]})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Y.map((t,a)=>e.jsx("div",{className:`p-3 text-center font-semibold text-sm ${a===0?"text-red-600":a===6?"text-blue-600":"text-gray-700"}`,children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:J().map((t,a)=>{if(t===null)return e.jsx("div",{className:"p-3"},a);const l=S(t),h=_(t),u=l===W,p=r===l;return e.jsxs("div",{onClick:()=>L(t),className:`relative p-3 border border-gray-200 rounded-lg cursor-pointer transition-all hover:shadow-md ${u?"ring-2 ring-blue-500":""} ${p?"bg-blue-50 border-blue-300":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-semibold mb-1 ${a%7===0?"text-red-600":a%7===6?"text-blue-600":"text-gray-900"}`,children:t}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${A(h)}`,children:U(h)}),h>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[h,"ê±´ ì˜ˆì•½"]})]})]}),u&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]},t)})}),r&&o[r]&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3",children:[new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})," í˜¸í…” ì˜ˆì•½ í˜„í™©"]}),e.jsx("div",{className:"space-y-3",children:o[r].map((t,a)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:t.petName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(t.status)}`,children:t.status==="confirmed"?"í™•ì •":t.status==="pending"?"ëŒ€ê¸°":t.status==="completed"?"ì™„ë£Œ":"ì·¨ì†Œ"})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"ë³´í˜¸ì:"})," ",t.ownerName]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ë£¸íƒ€ì…:"})," ",t.roomType]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"ì²´í¬ì¸:"})," ",t.checkIn]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì²´í¬ì•„ì›ƒ:"})," ",t.checkOut]})]}),e.jsx("div",{className:"mt-1",children:e.jsxs("span",{children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," ",t.phone]})})]})]}),e.jsx("button",{onClick:()=>F(t.id),className:"text-red-500 text-xs ml-2",children:"ì‚­ì œ"})]})},a))}),e.jsx("div",{className:"mt-4",children:N?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"ë°˜ë ¤ë™ë¬¼ ì´ë¦„",value:d.petName,onChange:t=>y("petName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë³´í˜¸ì ì´ë¦„",value:d.ownerName,onChange:t=>y("ownerName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"date",placeholder:"ì²´í¬ì•„ì›ƒ",value:d.checkOut,onChange:t=>y("checkOut",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë£¸íƒ€ì…",value:d.roomType,onChange:t=>y("roomType",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ì—°ë½ì²˜",value:d.phone,onChange:t=>y("phone",t.target.value),className:"w-full border p-2 rounded"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:I,className:"bg-blue-500 text-white px-3 py-1 rounded",children:"ì¶”ê°€"}),e.jsx("button",{onClick:()=>{m(!1),x({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""})},className:"border px-3 py-1 rounded",children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{onClick:()=>m(!0),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"ì˜ˆì•½ ì¶”ê°€"})})]}),r&&!o[r]&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ì´ ë‚ ì€ í˜¸í…” ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("div",{children:N?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"ë°˜ë ¤ë™ë¬¼ ì´ë¦„",value:d.petName,onChange:t=>y("petName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë³´í˜¸ì ì´ë¦„",value:d.ownerName,onChange:t=>y("ownerName",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"date",placeholder:"ì²´í¬ì•„ì›ƒ",value:d.checkOut,onChange:t=>y("checkOut",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ë£¸íƒ€ì…",value:d.roomType,onChange:t=>y("roomType",t.target.value),className:"w-full border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"ì—°ë½ì²˜",value:d.phone,onChange:t=>y("phone",t.target.value),className:"w-full border p-2 rounded"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:I,className:"bg-blue-500 text-white px-3 py-1 rounded",children:"ì¶”ê°€"}),e.jsx("button",{onClick:()=>{m(!1),x({petName:"",ownerName:"",checkOut:"",roomType:"",phone:""})},className:"border px-3 py-1 rounded",children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{onClick:()=>m(!0),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"ì˜ˆì•½ ì¶”ê°€"})})]})]})}function me(){return v.useEffect(()=>{(()=>{localStorage.getItem("allReservations")||localStorage.setItem("allReservations",JSON.stringify([])),localStorage.getItem("hotelReservations")||localStorage.setItem("hotelReservations",JSON.stringify([])),localStorage.getItem("groomingReservations")||localStorage.setItem("groomingReservations",JSON.stringify([])),localStorage.getItem("daycareReservations")||localStorage.setItem("daycareReservations",JSON.stringify([]))})();const c=o=>{(o.key==="allReservations"||o.key==="hotelReservations"||o.key==="groomingReservations"||o.key==="daycareReservations")&&window.dispatchEvent(new CustomEvent("reservationUpdated"))};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}},[]),null}const ee=(s,c)=>{const o=JSON.parse(localStorage.getItem("allReservations")||"[]"),g=o.findIndex(m=>m.id===s.id);g!==-1?o[g]=s:o.push(s),localStorage.setItem("allReservations",JSON.stringify(o));let r;switch(c){case"hotel":r="hotelReservations";break;case"grooming":r="groomingReservations";break;case"daycare":r="daycareReservations";break;default:r="groomingReservations"}const f=JSON.parse(localStorage.getItem(r)||"[]"),N=f.findIndex(m=>m.id===s.id);N!==-1?f[N]=s:f.push(s),localStorage.setItem(r,JSON.stringify(f)),window.dispatchEvent(new CustomEvent("reservationUpdated")),console.log(`âœ… ì˜ˆì•½ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${c} - ${s.petName} (${s.id})`)},G=s=>{if(!s?.length)return;const o=JSON.parse(localStorage.getItem("allReservations")||"[]").filter(r=>!s.includes(r.id));localStorage.setItem("allReservations",JSON.stringify(o)),["hotelReservations","groomingReservations","daycareReservations"].forEach(r=>{const N=JSON.parse(localStorage.getItem(r)||"[]").filter(m=>!s.includes(m.id));localStorage.setItem(r,JSON.stringify(N))}),window.dispatchEvent(new CustomEvent("reservationUpdated"))},B="/api/sms/confirm",te=!0,se=te&&!0,Q=typeof window<"u"?window.location.origin:"",ae=Q?`${Q}${B}`:B,X=se?"https://ì˜ˆì•½ë´‡.kr/api/sms/confirm":ae;class j extends Error{constructor(c,o,g){super(g||`SMS Error: ${c}`),this.code=c,this.statusCode=o,this.name="SMSError"}}async function Z(s){return new Promise(c=>setTimeout(c,s))}async function ne(s,c={}){const{retries:o=3,timeout:g=15e3,...r}=c;let f=null;for(let N=1;N<=o;N++)try{const m=new AbortController,d=setTimeout(()=>m.abort(),g),x=await fetch(s,{...r,signal:m.signal});if(clearTimeout(d),x.ok)return x;if((x.status>=500||x.status===429)&&N<o){const b=1e3*N;console.warn(`âš ï¸  ì¬ì‹œë„ ${N}/${o} (${b}ms í›„): HTTP ${x.status}`),await Z(b);continue}throw new j("HTTP_ERROR",x.status,`HTTP ${x.status}: ${x.statusText}`)}catch(m){if(f=m,m instanceof j)throw m;if(m instanceof TypeError&&m.message.includes("fetch")&&N<o){const d=1e3*N;console.warn(`âš ï¸  ì¬ì‹œë„ ${N}/${o} (${d}ms í›„): ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜`),await Z(d);continue}throw new j("NETWORK_ERROR",void 0,`ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${f.message}`)}throw f||new j("UNKNOWN_ERROR",void 0,"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜")}async function oe(s){const c=s.headers.get("content-type"),o=await s.text();if(!o)throw new j("EMPTY_RESPONSE",s.status,"API ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤");if(!c?.includes("application/json"))throw new j("INVALID_CONTENT_TYPE",s.status,`ì˜ˆìƒì¹˜ ëª»í•œ Content-Type: ${c}`);try{return JSON.parse(o)}catch{throw new j("JSON_PARSE_ERROR",s.status,`JSON íŒŒì‹± ì‹¤íŒ¨: ${o.substring(0,100)}`)}}const re={async sendConfirmation(s){const c=`[PuppyHotel] ${s.owner_name}ë‹˜ì˜ ${s.pet_name} ${s.service==="grooming"?"ë¯¸ìš©":s.service==="hotel"?"í˜¸í…”":"ë°ì´ì¼€ì–´"} ì˜ˆì•½ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì¼ì‹œ: ${s.reservation_date} ${s.reservation_time||""}.`;console.log("========================================"),console.log("ğŸ“± SMS ë°œì†¡ ì‹œì‘"),console.log("========================================"),console.log("ìˆ˜ì‹ ì:",s.phone),console.log("ë©”ì‹œì§€:",c),console.log("API URL:",X),console.log("========================================");try{const o=s.phone?.replace(/[^0-9]/g,"");if(!o)throw new j("INVALID_PHONE",void 0,"ìœ íš¨í•œ ì „í™”ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤");const g={to:o,message:c,text:c,reservationId:s.id,customerName:s.owner_name};console.log("ğŸš€ API í˜¸ì¶œ ì‹œì‘");const r=await ne(X,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(g),retries:3,timeout:15e3});console.log("ğŸ“¥ ì‘ë‹µ ìƒíƒœ:",r.status);const f=await oe(r);return console.log("========================================"),console.log("âœ… SMS ë°œì†¡ ì„±ê³µ!"),console.log("ğŸ“§ ë©”ì‹œì§€ ID:",f.messageId||"N/A"),console.log("========================================"),{success:!0,message:"SMS ë°œì†¡ ì™„ë£Œ",data:f}}catch(o){return console.log("========================================"),console.log("âŒ SMS ë°œì†¡ ì‹¤íŒ¨"),o instanceof j?(console.error(`ì—ëŸ¬ ì½”ë“œ: ${o.code}`),console.error(`ìƒíƒœ ì½”ë“œ: ${o.statusCode||"N/A"}`),console.error(`ë©”ì‹œì§€: ${o.message}`)):console.error("ì—ëŸ¬:",o),console.log("========================================"),{success:!1,error:o instanceof j||o instanceof Error?o.message:"SMS ë°œì†¡ ì‹¤íŒ¨",message:"ì˜ˆì•½ì€ í™•ì •ë˜ì—ˆìœ¼ë‚˜ SMS ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}}}};function V(s){return{id:s.id,petName:s.pet_name,ownerName:s.owner_name,service:s.service,date:s.reservation_date,time:s.reservation_time||"ë¯¸ì •",status:s.status,phone:s.phone,roomType:s.room_type,checkIn:s.check_in,checkOut:s.check_out,style:s.grooming_style}}async function he(){try{return(await z.getAll()).map(V).filter(c=>c.status!=="cancelled"&&c.status!=="deleted")}catch(s){return console.error("ì˜ˆì•½ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",s),[]}}async function ge(s,c,o=!0){try{const g=await z.update(s,{status:c});if(o&&c==="confirmed")try{const r=await re.sendConfirmation(g);r.success?console.log("âœ… SMS ë°œì†¡ ì„±ê³µ"):console.warn("âš ï¸ SMS ë°œì†¡ ì‹¤íŒ¨:",r.error)}catch(r){console.warn("âš ï¸ SMS ë°œì†¡ ì‹¤íŒ¨ (ë¬´ì‹œí•˜ê³  ê³„ì†):",r)}return{success:!0,data:V(g)}}catch(g){return console.error("ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:",g),{success:!1,error:g}}}function ue(s){return z.subscribeToChanges(c=>{if(console.log("ì˜ˆì•½ ë³€ê²½ ê°ì§€:",c),c.eventType==="INSERT"||c.eventType==="UPDATE"){const o=V(c.new);s({type:c.eventType,data:o});try{o.status==="cancelled"||o.status==="deleted"?G([o.id]):(G([o.id]),ee(o,o.service))}catch(g){console.warn("localStorage ì˜ˆì•½ ë™ê¸°í™” ì‹¤íŒ¨:",g)}}else if(c.eventType==="DELETE"){const o=c.old.id;s({type:"DELETE",id:o});try{G([o])}catch(g){console.warn("localStorage ì˜ˆì•½ ì‚­ì œ ë™ê¸°í™” ì‹¤íŒ¨:",g)}}})}export{ie as G,de as H,me as R,ge as a,V as c,he as l,G as r,ue as s,ee as u};
//# sourceMappingURL=dashboardHelper-BxF1oLO4.js.map
